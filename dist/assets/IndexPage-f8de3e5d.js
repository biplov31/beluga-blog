import{r as c,j as i,a as e,L as h,S as u}from"./index-53208603.js";import{f}from"./index-2b7347fb.js";function p({_id:s,title:l,content:t,image:a,createdAt:m,author:r}){const[n,o]=c.useState(!1);return i("div",{className:"post",children:[e("div",{className:"image-container",children:e(h,{to:`/getpost/${s}`,children:e("img",{src:"","data-src":`/${a}`,onLoad:()=>o(!0),style:{filter:n?"blur(0px)":"blur(10px)",clipPath:!n&&"inset(0)"}})})}),i("div",{className:"text-content",children:[e(h,{to:`/getpost/${s}`,children:e("h2",{children:l})}),i("div",{className:"post-info",children:[e("a",{className:"author",children:r.username}),e("time",{children:f(new Date(m),{representation:"date"})})]}),e("p",{dangerouslySetInnerHTML:{__html:t.split(".")[0]+"."},className:"summary"})]})]})}function v(){const[s,l]=c.useState([]);return c.useEffect(()=>{fetch("/post/").then(t=>{t.json().then(a=>{l(a)})})},[]),c.useEffect(()=>{(()=>{const a=new IntersectionObserver((r,n)=>{r.forEach(o=>{if(o.isIntersecting){const d=o.target;d.src=d.dataset.src,n.unobserve(d)}})},{rootMargin:"0px",threshold:.1});document.querySelectorAll("[data-src]").forEach(r=>{a.observe(r)})})()},[s]),i("main",{className:"posts",children:[e("h1",{children:"Recent Posts"}),!s.length>0&&[...Array(5).keys()].map(t=>e(u,{hasImage:!1,textCount:3},t)),s.length>0&&s.map(t=>e(p,{...t},t._id))]})}export{v as default};
